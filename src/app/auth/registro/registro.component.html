<div class="container-fluid h-100">

  <div class="row gap-3 h-100 justify-content-center align-items-center ">
    <section aria-label="Formulário de Registro" class="d-grid gap-2 col-sm col-lg-4">
      <mat-card class="p-md-4">
        <mat-card-content>
          <form class="d-grid gap-2 fs-6 p-3" [formGroup]="form" (ngSubmit)="registrar()">
            <img src="/assets/logo-main.svg" width="150px" class="my-2">
            <mat-form-field appearance="outline">
              <mat-label>Nome de Usuário</mat-label>
              <input matInput
                data-cy="txtNome"
                type="text"
                formControlName="nome"
                placeholder="Ex. João">
              <mat-error class="text-white" *ngIf="nome?.touched && nome?.invalid">
                <span *ngIf="nome?.errors?.['required']">O nome precisa ser preenchido.</span>
                <span *ngIf="nome?.errors?.['minlength']">O nome deve ter no mínimo 3 caracteres.</span>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Endereço de email</mat-label>
              <input matInput
                data-cy="txtEmail"
                formControlName="email"
                type="email"
                placeholder="Ex. seunome@gmail.com">
              <mat-error class="text-white" *ngIf="email?.touched && email?.invalid">
                <span *ngIf="email?.errors?.['email']">O email precisa seguir o formato "usuario@dominio.com".</span>
                <span *ngIf="email?.errors?.['required']">O email precisa ser preenchido.</span>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Senha</mat-label>
              <input matInput
                data-cy="txtSenha"
                formControlName="senha"
                type="password">
              <mat-error class="text-white" *ngIf="senha?.touched && senha?.invalid">
                <span *ngIf="senha?.errors?.['required']">A senha precisa ser preenchida.</span>
                <span *ngIf="senha?.errors?.['minlength']">A senha deve conter no mínimo 6 caracteres.</span>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Confirmar Senha</mat-label>
              <input matInput
                data-cy="txtConfirmarSenha"
                formControlName="confirmarSenha"
                type="password">
              <mat-error class="text-white" *ngIf="confirmarSenha?.touched && confirmarSenha?.invalid">
                <span *ngIf="confirmarSenha?.errors?.['required']">A senha precisa ser preenchida.</span>
                <span *ngIf="confirmarSenha?.errors?.['minlength']">A senha deve conter no mínimo 6 caracteres.</span>
              </mat-error>
              <mat-error class="text-white" *ngIf="confirmarSenha?.dirty">
                <span *ngIf="form?.errors?.['senhasIncompativeis']">As senhas devem ser iguais.</span>
              </mat-error>
            </mat-form-field>

            <div class="row px-2 gap-2 mt-2">
              <button mat-stroked-button
                color="accent"
                class="col"
                type="button"
                routerLink="/conta/autenticar">
                <mat-icon>login</mat-icon>
                Login
              </button>
              <a mat-flat-button
                data-cy="btnRegistrar"
                color="accent"
                class="col"
                (click)="registrar()"
                role="button"
                [disabled]="this.form.touched && this.form.invalid">
                <mat-icon>person_add</mat-icon>
                Registrar
              </a>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </section>

    <figure class="d-none d-lg-block col-auto align-items-center">
      <img src="/assets/undraw-registro.svg" width="400px" alt="Imagem ilustrando uma garota interagindo com um formulário online">
    </figure>

    <div class="d-flex justify-content-end px-4">
      <a href="http://www.academiadoprogramador.com">
        <img src="/assets/logo-titulo.svg" width="180px" alt="Logo da Academia do Programador">
      </a>
    </div>
  </div>
</div>
